import { useState } from "react"
import NewsItem from "./NewsItem"
// import loading_gif from "./1495.gif"
import { useEffect } from "react"
import React from 'react'


export default function NewsContent(props) {

    const [pageSize, setpageSize] = useState(20)
    const [page, setPage] = useState(1)
    const [totalResult, settotalResult] = useState()
    const [parsedData, setparsedData] = useState()
    const [loading, setLoading] = useState()
    useEffect(() => {
        async function callBack() {
    // After API key plz uncomment three line and comment next two lines
            
            // let url = `https://newsapi.org/v2/top-headlines?country=in&category=${props.category}&apiKey=${props.API_KEY}&pageSize=${pageSize}`;
            // let data = await fetch(url);
            // let parsedData = await data.json();
            
            let data={"status":"ok","totalResults":38,"articles":[{"source":{"id":null,"name":"The Indian Express"},"author":"The Indian Express","title":"Israel Iran News Live Updates: Kerala couple await son aboard ship seized by Iranian military; Biden calls G7 meet - The Indian Express","description":null,"url":"https://indianexpress.com/article/world/israel-iran-news-live-updates-iran-launches-drones-at-israel-says-israeli-military-9267882/","urlToImage":null,"publishedAt":"2024-04-14T10:16:00Z","content":null},{"source":{"id":null,"name":"The Indian Express"},"author":"Manoj C G","title":"In BJP manifesto, what’s in and what’s out: No mention of NRC, UCC goal reiterated - The Indian Express","description":"The thrust of the “Sankalp Patra” is more on governance, including widening of the welfare net and expansion of infrastructure programmes.","url":"https://indianexpress.com/article/political-pulse/bjp-manifesto-analysis-nrc-ucc-9269312/","urlToImage":"https://images.indianexpress.com/2024/04/bjp-manifesto.jpeg","publishedAt":"2024-04-14T09:35:08Z","content":"The BJP on Sunday released its Lok Sabha election manifesto, resolving to implement One Nation, One Election and reiterating its stand to draw up a Uniform Civil Code (UCC).The party has also promise… [+7496 chars]"},{"source":{"id":null,"name":"Hindustan Times"},"author":"HT News Desk","title":"Sydney knife attack: Indian-origin couple recall how they survived - Hindustan Times","description":"Shoi Ghoshal and her husband Debashis Chakrabarty were at the Westfield shopping centre at Bondi Junction when the attack happened. | World News","url":"https://www.hindustantimes.com/world-news/sydney-knife-attack-indian-origin-couple-recall-how-they-survived-101713084318422.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2024/04/14/1600x900/AUSTRALIA-CRIME-POLICE-31_1713084542549_1713084576372.jpg","publishedAt":"2024-04-14T09:31:13Z","content":"An Indian-origin couple have recounted how they survived the horrific knife attack in Australia's Sydney on Saturday. Shoi Ghoshal and her husband Debashis Chakrabarty were at the Westfield shopping … [+2236 chars]"},{"source":{"id":"the-hindu","name":"The Hindu"},"author":"Sportstar","title":"KKR vs LSG LIVE Score IPL 2024: Kolkata Knight Riders takes on Lucknow Super Giants; Preview, predictions - Sportstar","description":null,"url":"https://sportstar.thehindu.com/cricket/ipl/ipl-news/kkr-vs-lsg-live-score-kolkata-knight-riders-lucknow-super-giants-ipl-2024-match-streaming-info-highlights/article68064344.ece","urlToImage":null,"publishedAt":"2024-04-14T08:35:23Z","content":null},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"TOI World Desk","title":"24 year Indian national shot dead inside a car in Canada - The Times of India","description":"NRI News: Chirag Antil, an Indian student, was shot and killed in Vancouver. Varun Choudhary seeks Ministry support. GoFundMe campaign initiated to bring Antil'","url":"https://timesofindia.indiatimes.com/nri/24-year-indian-national-shot-dead-inside-a-car-in-canada/articleshow/109285290.cms","urlToImage":"https://static.toiimg.com/thumb/msid-109286104,width-1070,height-580,imgsize-31462,resizemode-75,overlay-toi_sw,pt-32,y_pad-40/photo.jpg","publishedAt":"2024-04-14T08:35:00Z","content":null},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"Aadya+Jha","title":"Lose weight faster with this easy to follow daily routine - The Times of India","description":"Adding these simple yet effective habits into your daily routine can help you lose weight faster and achieve your fitness goals.","url":"https://timesofindia.indiatimes.com/life-style/health-fitness/web-stories/lose-weight-faster-with-this-easy-to-follow-daily-routine/photostory/109161818.cms","urlToImage":"https://static.toiimg.com/thumb/msid-109161847,imgsize-828399,width-900,height-1200,resizemode-6/109161847.jpg","publishedAt":"2024-04-14T08:30:00Z","content":"Start your metabolism by drinking a glass of Jeera water first thing in the morning. Jeera, or cumin water, is known for its digestive properties and can help boost your metabolism, aiding in weight … [+4 chars]"},{"source":{"id":null,"name":"Livemint"},"author":"Livemint","title":"Weekly Tech Recap: Meta AI starts appearing on WhatsApp and Instagram, ChatGPT gets a major upgrade and more | Mint - Mint","description":"Weekly Tech Recap: From Meta testing out its AI chatbot on WhatsApp and Instagram to ChatGPT getting the GPT-4 Turbo update, here's a list of top events that shook up the world of technology this week.","url":"https://www.livemint.com/technology/tech-news/weekly-tech-recap-meta-ai-starts-appearing-on-whatsapp-and-instagram-chatgpt-gets-a-major-upgrade-and-more-11713078960257.html","urlToImage":"https://www.livemint.com/lm-img/img/2024/04/14/1600x900/FILES-FRANCE-TECHNOLOGY-INTERNET-1_1713082328986_1713082426664.jpg","publishedAt":"2024-04-14T08:21:51Z","content":"Weekly Tech Recap: We've seen a whirlwind of activity shaping the world of technology, including OpenAI delivering a much-needed upgrade to ChatGPT, Meta testing its AI chatbot on WhatsApp and Instag… [+5006 chars]"},{"source":{"id":null,"name":"Livemint"},"author":"Vaamanaa Sethi","title":"TCS Q4 Results: IT major stock to open in green tomorrow over robust earnings | Mint - Mint","description":"TCS share price: Since the TCS results were announced after the Indian stock market closed on Friday, it's anticipated that the TCS share price will respond to these upbeat Q4 results come Monday.","url":"https://www.livemint.com/market/stock-market-news/tcs-q4-results-it-major-stock-to-open-in-green-tomorrow-over-robust-earnings-11713010353379.html","urlToImage":"https://www.livemint.com/lm-img/img/2024/04/13/1600x900/TCS_1713011494374_1713011494774.JPG","publishedAt":"2024-04-14T08:21:15Z","content":"The shares of Tata Consultancy Services (TCS) is all set to remain in focus tomorrow, April 15 after posting its fourth quarter results on Friday. The IT major reported its financial results for the … [+2922 chars]"},{"source":{"id":null,"name":"YouTube"},"author":null,"title":"What's Role Of Genetics In Non-Communicable Diseases & What Can You Do To Prevent Them | CNBC TV18 - CNBC-TV18","description":"In this segment of The Medicine Box, Ekta Batra speaks to Dr Hemant P Thacker, internal medicine consultant at Sir HN Reliance Foundation Hospital & Research...","url":"https://www.youtube.com/watch?v=meDqYcS0Z1A","urlToImage":"https://i.ytimg.com/vi/meDqYcS0Z1A/maxresdefault.jpg","publishedAt":"2024-04-14T08:00:06Z","content":null},{"source":{"id":null,"name":"Hindustan Times"},"author":"HT Entertainment Desk","title":"Pooja Bhatt reacts to firing outside Salman Khan's Mumbai home: 'Horrific and condemnable' - Hindustan Times","description":"Pooja Bhatt said that if something like this 'can happen with a police van parked outside Salman Khan's residence for protection', then safety was an illusion. | Bollywood","url":"https://www.hindustantimes.com/entertainment/bollywood/pooja-bhatt-reacts-firing-outside-salman-khan-mumbai-home-scary-horrific-condemnable-101713080327159.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2024/04/14/1600x900/pooja_bhatt_salman_khan_firing_1713080579914_1713080611435.jpg","publishedAt":"2024-04-14T07:54:42Z","content":"Pooja Bhatt took to her X (formerly Twitter) account on Sunday and reacted to the news of gunshots being fired outside Salman Khans residence in Mumbai. The actor responded to a tweet by news agency … [+2102 chars]"},{"source":{"id":null,"name":"Livemint"},"author":"Fareha Naaz","title":"Maidaan ‘must-watch Indian sports film’, Sourav Ganguly urges fans not to miss Ajay Devgn's movie | Mint - Mint","description":"Sourav Ganguly praised Maidaan movie, calling the biopic a captivating portrayal of India's legendary football coach. Check here what Dada said while recommending Ajay Devgn's movie.","url":"https://www.livemint.com/news/trends/maidaan-must-watch-indian-sports-film-sourav-ganguly-urges-fans-not-to-miss-ajay-devgns-movie-11713076427397.html","urlToImage":"https://www.livemint.com/lm-img/img/2024/04/14/1600x900/Maidaan_movie_1712640681452_1713078989751.png","publishedAt":"2024-04-14T07:53:28Z","content":"Sourav Ganguly, the former cricketer also known as Dada, urged the masses to watch out for the Ajay Devgn-starrer sports drama film Maidaan. The Bollywood movie was released on the occasion of Eid, A… [+2372 chars]"},{"source":{"id":null,"name":"Republic World"},"author":"Garvit Parashar","title":"“Twinkle, Twinkle Little Star” NASA's Hubble Telescope Unveils Mesmerizing Video of Liller 1 | WATCH - Republic World","description":"The American space agency NASA (National Aeronautics and Space Administration) always posts intriguing stuff on its Instagram page. People who are interested in space and everything related to the celestial world. NASA always shares posts that are about some …","url":"https://www.republicworld.com/science/space/viral-nasa-s-hubble-telescope-unveils-mesmerizing-video-of-liller-1","urlToImage":"https://img.republicworld.com/rimages/befunky-collage86-171308020768516_9.webp","publishedAt":"2024-04-14T07:38:00Z","content":"The American space agency NASA (National Aeronautics and Space Administration) always posts intriguing stuff on its Instagram page. People who are interested in space and everything related to the ce… [+1904 chars]"},{"source":{"id":null,"name":"India TV News"},"author":"Saumya Nigam","title":"Garena Free Fire Max: Redeem codes for April 13, 2024 - India TV News","description":"Garena Free Fire Max: Here are the redeem codes for the day which will help you win several free rewards like gun skin, advanced weapons and diamonds during the game play. The codes are of limited use, so players will have to be quick enough to redeem them.","url":"https://www.indiatvnews.com/technology/news/garena-free-fire-max-redeem-codes-for-april-13-2024-2024-04-14-926209","urlToImage":"https://resize.indiatvnews.com/en/resize/newbucket/1200_-/2024/04/garena-free-fire-max-2-1713078287.jpg","publishedAt":"2024-04-14T07:21:44Z","content":"Garena Free Fire MAX, one of the popular combat mobile games has reportedly released its redeem codes for the day, i.e., April 14, 2024. The company reveals everyday codes that enable the players to … [+2359 chars]"},{"source":{"id":null,"name":"NewsX"},"author":null,"title":"Swine Flu Claims 12 Lives in Rajasthan, Jaipur Emerges as Hotspot - NewsX","description":"Despite the significant rise in swine flu cases, health authorities have assured the public that there is no need for panic as the number of cases has declined in recent days….\n - Newsx","url":"https://www.newsx.com/state/swine-flu-claims-12-lives-in-rajasthan-jaipur-emerges-as-hotspot/","urlToImage":"https://www.newsx.com/wp-content/uploads/2024/04/WEBSITE-TEMPLATE-77.png","publishedAt":"2024-04-14T07:03:00Z","content":"According to a health department report released in April, swine flu has led to the demise of 12 individuals in Rajasthan between January 1 and March 31 this year. The report indicates that Udaipur w… [+1928 chars]"},{"source":{"id":null,"name":"News18"},"author":"Aditi Ray Chowdhury","title":"Andhra CM Jagan Reddy Suffers Injuries After Stones Hurled At His Bus In Vijayawada, PM Modi Wishes Him Spe - News18","description":"Following the incident, the Chief Minister was also given first aid","url":"https://www.news18.com/politics/andhra-pradesh-cm-jagan-mohan-reddy-injured-bus-stone-pelting-vijayawada-rally-ysrcp-tdp-8850465.html","urlToImage":"https://images.news18.com/ibnlive/uploads/2024/04/whatsapp-image-2024-04-13-at-21.48.33-2024-04-cd3cb817147a579316c0972ae39facce-16x9.jpeg?impolicy=website&width=1200&height=675","publishedAt":"2024-04-14T06:54:00Z","content":"Chief Minister YS Jagan Mohan Reddy sustained injuries on Saturday evening after stones were hurled at his convoy during an election campaign in Andhra Pradeshs Vijaywada.\r\nA group of miscreants star… [+3107 chars]"},{"source":{"id":null,"name":"Hindustan Times"},"author":"HT News Desk","title":"Indian embassy in Israel issues advisory as Iran's attack raises threat of wider conflict - Hindustan Times","description":"Iran's attacks after a suspected Israeli air strike on its embassy compound in Damascus raised the threat of a wider regional conflict. | World News","url":"https://www.hindustantimes.com/world-news/indian-embassy-in-israel-issues-advisory-as-iranian-attack-triggers-threat-of-a-wider-conflict-101713073143430.html","urlToImage":"https://www.hindustantimes.com/ht-img/img/2024/04/14/1600x900/ISRAEL-IRAN-PALESTINIAN-CONFLICT-4_1713074577936_1713074775272_1713074912118.jpg","publishedAt":"2024-04-14T06:23:59Z","content":"The Indian embassy in Israel on Sunday urged its citizens living there to stay calm and adhere to the safety protocols issued by the local authorities as Iran launched explosive drones and missiles i… [+1860 chars]"},{"source":{"id":null,"name":"NDTV News"},"author":null,"title":"Watch: Astronaut Gives Virtual Tour Of International Space Station - NDTV","description":"NDTV.com: India, Business, Bollywood, Cricket, Video and Breaking News","url":"https://www.ndtv.com","urlToImage":"https://cdn.ndtv.com/common/images/ogndtv.png","publishedAt":"2024-04-14T06:10:43Z","content":null},{"source":{"id":null,"name":"Koimoi"},"author":"Shalmesh More","title":"Bade Miyan Chote Miyan Box Office Day 4 Advance Booking: Akshay Kumar & Tiger Shroff Starrer Sells Over 1 Lakh Tickets! - Koimoi","description":"Bade Miyan Chote Miyan has finally managed to hit the 1 lakh mark in ticket sales after the opening day in the advance booking.","url":"https://www.koimoi.com/box-office/bade-miyan-chote-miyan-box-office-day-4-advance-booking-akshay-kumar-tiger-shroff-starrer-sells-over-1-lakh-tickets/","urlToImage":"https://static-koimoi.akamaized.net/wp-content/new-galleries/2024/04/bade-miyan-chote-miyan-box-office-day-4-advance-booking-001.jpg","publishedAt":"2024-04-14T06:03:04Z","content":"Bade Miyan Chote Miyan Box Office Day 4 Advance Booking(Photo Credit Facebook)\r\nBade Miyan Chote Miyan, starring Akshay Kumar and Tiger Shroff, underperformed in a big way at the Indian box office on… [+1848 chars]"},{"source":{"id":null,"name":"Trendhunter.com"},"author":null,"title":"AI-Powered ENC Earbuds : realme Buds T110 - Trend Hunter","description":"realme Buds T110  - The realme Buds T110 earbuds are a premium audio solution engineered with the needs of commuters and avid listeners alike in mind to help them enjo...","url":"https://www.trendhunter.com/trends/realme-buds-t110","urlToImage":"https://cdn.trendhunterstatic.com/thumbs/531/realme-buds-t110.jpeg?auto=webp","publishedAt":"2024-04-14T06:01:50Z","content":"The realme Buds T110 earbuds are a premium audio solution engineered with the needs of commuters and avid listeners alike in mind to help them enjoy their favorite music or content from anywhere. The… [+529 chars]"},{"source":{"id":"the-times-of-india","name":"The Times of India"},"author":"TOI Sports Desk","title":"Why former Australian cricketer called Punjab Kings vs Rajasthan Royals IPL match a 'poor quality game' | Cricket News - The Times of India","description":"Cricket News: Rajasthan Royals secured a thrilling win against Punjab Kings, marking their sixth consecutive close encounter. However, former Australian cricketer T","url":"https://timesofindia.indiatimes.com/sports/cricket/ipl/top-stories/why-former-australian-cricketer-called-punjab-kings-vs-rajasthan-royals-ipl-match-a-poor-quality-game/articleshow/109283525.cms","urlToImage":"https://static.toiimg.com/thumb/msid-109283630,width-1070,height-580,imgsize-62610,resizemode-75,overlay-toi_sw,pt-32,y_pad-40/photo.jpg","publishedAt":"2024-04-14T06:01:00Z","content":null}]}
            let parsedData = data;
            setparsedData(parsedData)
            settotalResult(parsedData.totalResults);
            setLoading(true);

        } callBack();
    }, []);

    const handleNextChange = async () => {
        setLoading(false);
        if ((totalResult / pageSize) * 10 !== "0") {
            let url = `https://newsapi.org/v2/top-headlines?country=in&category=${props.category}&apiKey=${props.API_KEY}&pageSize=${pageSize}}&page=${page + 1}`;
            let data = await fetch(url);
            let parsedData = await data.json();
            setparsedData(parsedData)
            settotalResult(parsedData.totalResults);
            setLoading(true);
            setPage(page + 1)

        }
    }
    const handlePreviousChange = async () => {
        setLoading(false);
        if (page !== 1) {
            let url = `https://newsapi.org/v2/top-headlines?country=in&category=${props.category}&apiKey=${props.API_KEY}&pageSize=${pageSize}}&page=${page - 1}`;
            let data = await fetch(url);
            let parsedData = await data.json();
            setparsedData(parsedData)
            settotalResult(parsedData.totalResults);
            setLoading(true);
            setPage(page - 1)


        }
    }


    return (
        <div className="container my-3">

            <h2>NewsBoy -Breaking News</h2>
            <div className="row">
                {!loading && <img className="container d-flex justify-content" src="./image_folder/1495.gif" style={{ width: "150px", height: "150px" }} alt="loading" />}
                {loading && parsedData.articles.map((element) => {
                    return <div className="col-md-4" key={element.title}>
                        <NewsItem title={element.title} des={element.description} img={element.urlToImage} url={element.url}></NewsItem>
                    </div>
                }
                )}
            </div>
            <div className="container d-flex justify-content-between">

                <button type="button" className="btn btn-primary" disabled={page === 1 ? true : false} onClick={handlePreviousChange}> &larr; Previous</button>

                <button type="button" className="btn btn-primary " disabled={(totalResult - (pageSize * page)) <= "0" ? true : false} onClick={handleNextChange}>  &rarr; Next</button>
            </div>
        </div>
    )

}


